<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SurvivalQuant</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }
        
        .section {
            background: #ffffff;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            text-align: center;
        }
        
        .header-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
        }
        
        .chart-section {
            background: #ffffff;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .chart-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin: 0;
        }
        
        .chart-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .control-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }
        
        .control-btn:hover {
            background: #e9ecef;
        }
        
        .control-btn.active:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
        }
        
        .coin-selector {
            padding: 10px 15px;
            border: 2px solid #ddd;
            border-radius: 25px;
            background: white;
            font-size: 1rem;
            font-weight: 500;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 15px;
            min-width: 200px;
        }
        
        .coin-selector:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .coin-selector:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }
        
        .timeframe-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            font-size: 0.9rem;
            font-weight: 600;
            padding: 5px 10px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.8);
        }
        
        .legend-item.daily {
            color: #222222;
        }
        
        .legend-item.hourly4 {
            color: #FF5733;
        }
        
        .legend-item.minute30 {
            color: #2E7D32;
        }
        
        .legend-item.minute5 {
            color: #1976D2;
        }
        
        .legend-item.minute1 {
            color: #9C27B0;
        }
        
        .chart-info {
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            border: 1px solid #dee2e6;
        }
        
        .info-item {
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #495057;
        }
        
        .info-item:last-child {
            margin-bottom: 0;
        }
        
        .fractal-chart-container {
            position: relative;
            height: 500px;
            width: 100%;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 3px solid #ff69b4;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.3);
            overflow: hidden;
        }
        
        .candle-layer {
            position: absolute;
            top: 20px;
            left: 20px;
            width: calc(100% - 40px) !important;
            height: calc(100% - 40px) !important;
            pointer-events: none;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .stat-item.positive {
            border-left-color: #28a745;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }
        
        .stat-item.negative {
            border-left-color: #dc3545;
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
        }
        
        .stat-change {
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .positive .stat-change {
            color: #28a745;
        }
        
        .negative .stat-change {
            color: #dc3545;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 1.1rem;
            color: #666;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .loading::after {
            content: '...';
            animation: pulse 1.5s infinite;
        }
        
        .links-section {
            grid-column: 1;
        }
        
        .ads-section {
            background: #f8f9fa;
            min-height: 200px;
            border-style: dashed;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
        }
        
        .future-section {
            background: #f1f3f4;
            min-height: 150px;
            border-style: dashed;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
        }
        
        @media (min-width: 768px) {
            .main-container {
                grid-template-columns: 2fr 1fr;
                grid-template-areas: 
                    "header header"
                    "chart chart"
                    "links ads"
                    "games utilities";
            }
            
            .header-section { grid-area: header; }
            .chart-section { grid-area: chart; }
            .links-section { grid-area: links; }
            .ads-section { grid-area: ads; }
            .games-section { grid-area: games; }
            .utilities-section { grid-area: utilities; }
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 400;
        }
        
        h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: 400;
            color: #333;
        }
        
        h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 500;
            color: #555;
        }
        
        .url-display {
            background: #f8f9fa;
            color: #333;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 500;
            margin: 15px 0;
            word-break: break-all;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .url-display:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .copy-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-top: 15px;
        }
        
        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(238, 90, 36, 0.4);
        }
        
        .description {
            margin-top: 20px;
            font-size: 1rem;
            opacity: 0.9;
            line-height: 1.6;
        }
        
        .success-message {
            display: none;
            color: #2ecc71;
            font-weight: 500;
            margin-top: 10px;
        }
        
        .link-display {
            background: #f8f9fa;
            color: #333;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .link-display a {
            color: #0066cc;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .link-display a:hover {
            color: #004499;
            text-decoration: underline;
        }
        
        .section-link {
            display: block;
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
            position: relative;
            height: 100%;
            width: 100%;
        }
        
        .section-link:hover {
            transform: translateY(-2px);
            color: #333;
        }
        
        .link-arrow {
            position: absolute;
            bottom: 15px;
            right: 15px;
            font-size: 1.5rem;
            font-weight: bold;
            opacity: 0.7;
            transition: all 0.3s ease;
        }
        
        .section-link:hover .link-arrow {
            opacity: 1;
            transform: translateX(5px);
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- í—¤ë” ì„¹ì…˜ -->
        <div class="section header-section">
            <h1>ğŸš€ SurvivalQuant</h1>
            <p>EconomicEden - ì‹¤ì‹œê°„ ì½”ì¸ ì°¨íŠ¸ ë° íˆ¬ì ë„êµ¬</p>
        </div>
        
        <!-- í”„ë™íƒˆ ìº”ë“¤ìŠ¤í‹± ì°¨íŠ¸ ì„¹ì…˜ -->
        <div class="chart-section">
            <div class="chart-header">
                <h2 class="chart-title">ï¿½ï¸ í”„ë™íƒˆ ìº”ë“¤ìŠ¤í‹± ì°¨íŠ¸</h2>
                <div class="chart-controls">
                    <select id="coinSelector" class="coin-selector">
                        <option value="BTCUSDT">ğŸŸ¡ Bitcoin (BTC)</option>
                        <option value="ETHUSDT">ğŸ”· Ethereum (ETH)</option>
                        <option value="SOLUSDT">ğŸŸ£ Solana (SOL)</option>
                        <option value="ADAUSDT">ğŸ”µ Cardano (ADA)</option>
                        <option value="DOGEUSDT">ğŸŸ  Dogecoin (DOGE)</option>
                    </select>
                    <button class="control-btn active" id="refreshBtn" onclick="refreshChart()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
                </div>
                <div class="timeframe-legend">
                    <span class="legend-item daily">â–  ì¼ë´‰ (1D)</span>
                    <span class="legend-item hourly4">â–  4ì‹œê°„ë´‰ (4H)</span>
                    <span class="legend-item minute30">â–  30ë¶„ë´‰ (30M)</span>
                    <span class="legend-item minute5">â–  5ë¶„ë´‰ (5M)</span>
                    <span class="legend-item minute1">â–  1ë¶„ë´‰ (1M)</span>
                </div>
            </div>
            
            <!-- í”„ë™íƒˆ ìº”ë“¤ ì°¨íŠ¸ í‘œì‹œ ê³µê°„ -->
            <div class="fractal-chart-container">
                <canvas id="dailyCanvas" class="candle-layer" style="z-index: 1;"></canvas>
                <canvas id="hourly4Canvas" class="candle-layer" style="z-index: 2;"></canvas>
                <canvas id="minute30Canvas" class="candle-layer" style="z-index: 3;"></canvas>
                <canvas id="minute5Canvas" class="candle-layer" style="z-index: 4;"></canvas>
                <canvas id="minute1Canvas" class="candle-layer" style="z-index: 5;"></canvas>
                <div id="loadingMessage" class="loading">í”„ë™íƒˆ ìº”ë“¤ ë°ì´í„° ë¡œë”©ì¤‘...</div>
            </div>
            
            <div class="chart-info">
                <div class="info-item">
                    <strong>í˜ì‹ ì  ì»¨ì…‰:</strong> ì„¸ê³„ ìµœì´ˆ í”„ë™íƒˆ êµ¬ì¡° ìº”ë“¤ìŠ¤í‹± ì°¨íŠ¸
                </div>
                <div class="info-item">
                    <strong>êµ¬ì¡°:</strong> ì¼ë´‰ â†’ 4ì‹œê°„ë´‰(6ê°œ) â†’ 30ë¶„ë´‰(8ê°œ) â†’ 5ë¶„ë´‰(6ê°œ) â†’ 1ë¶„ë´‰(5ê°œ)
                </div>
                <div class="info-item">
                    <strong>íˆ¬ëª…ë„:</strong> ì¼ë´‰(ë¶ˆíˆ¬ëª…) â†’ 4ì‹œê°„ë´‰(80%) â†’ 30ë¶„ë´‰(60%) â†’ 5ë¶„ë´‰(40%) â†’ 1ë¶„ë´‰(20%)
                </div>
            </div>
        </div>
        
        <!-- ë§í¬ ì„¹ì…˜ -->
        <div class="section links-section">
            <h2>ğŸ”— ì£¼ìš” ë§í¬</h2>
            
            <div class="url-display" id="urlDisplay">
                https://dgpark0617.github.io/SurvivalQuant/
            </div>
            <button class="copy-btn" onclick="copyToClipboard()">
                ğŸ“‹ URL ë³µì‚¬í•˜ê¸°
            </button>
            <div class="success-message" id="successMessage">
                âœ… URLì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!
            </div>
            
            <div class="link-display">
                <a href="https://www.bybit.com/copyMt5/trade-center/detail?providerMark=xkc2wsLqVomphpP%2FtV6RRQ%3D%3D" target="_blank">
                    ğŸŒŸ EconomicEden
                </a>
            </div>
            
            <div class="link-display">
                <a href="https://m.blog.naver.com/economic_eden?tab=1" target="_blank">
                    ğŸ“– ê°œë°œë¸”ë¡œê·¸
                </a>
            </div>
            
            <div class="link-display">
                <a href="https://youtube.com/@economiceden?si=OLHH8h2MZep0oAYA" target="_blank">
                    ğŸ“º ìœ íŠœë¸Œ
                </a>
            </div>
            
            <div class="link-display">
                <a href="https://cryptoinvest.cafe24.com:8080/m/dashboard" target="_blank">
                    ğŸ’° í¬ë¦½í†  ëŒ€ì‹œë³´ë“œ
                </a>
            </div>
        </div>
        
        <!-- ê´‘ê³  ì„¹ì…˜ -->
        <div class="section ads-section">
            <div>
                <h3>ğŸ“º ê´‘ê³  ê³µê°„</h3>
                <p>YouTube ì• ë“œì„¼ìŠ¤ ë° ê´‘ê³ ê°€ í‘œì‹œë  ì˜ˆì •ì…ë‹ˆë‹¤</p>
            </div>
        </div>
        
        <!-- ê²Œì„ ì„¹ì…˜ -->
        <div class="section future-section games-section">
            <a href="games/" class="section-link">
                <h3>ğŸ® ë¯¸ë‹ˆ ê²Œì„</h3>
                <p>ì¬ë¯¸ìˆëŠ” ê²Œì„ë“¤ì„ ì¦ê²¨ë³´ì„¸ìš”!</p>
                <div class="link-arrow">â†’</div>
            </a>
        </div>
        
        <!-- ìœ í‹¸ë¦¬í‹° ì„¹ì…˜ -->
        <div class="section future-section utilities-section">
            <a href="utilities/" class="section-link">
                <h3>ğŸ› ï¸ ìœ í‹¸ë¦¬í‹°</h3>
                <p>ìœ ìš©í•œ ë„êµ¬ë“¤ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”!</p>
                <div class="link-arrow">â†’</div>
            </a>
        </div>
    </div>

    <script>
        // ê¸°ì¡´ URL ë³µì‚¬ ê¸°ëŠ¥
        function copyToClipboard() {
            const urlText = document.getElementById('urlDisplay').textContent;
            navigator.clipboard.writeText(urlText).then(function() {
                const successMessage = document.getElementById('successMessage');
                successMessage.style.display = 'block';
                setTimeout(() => {
                    successMessage.style.display = 'none';
                }, 3000);
            });
        }
        
        // í”„ë™íƒˆ ìº”ë“¤ìŠ¤í‹± ì°¨íŠ¸ ë³€ìˆ˜ë“¤
        let currentSymbol = 'BTCUSDT';
        let candleData = {
            '1d': [],
            '4h': [],
            '30m': [],
            '5m': [],
            '1m': []
        };
        let canvasContexts = {};
        let chartDimensions = {
            width: 0,
            height: 0,
            candleWidth: 120,
            candleSpacing: 10
        };
        
        // í”„ë™íƒˆ ìº”ë“¤ìŠ¤í‹± ì°¨íŠ¸ ì´ˆê¸°í™”
        function initializeFractalChart() {
            console.log('=== ğŸ•¯ï¸ í”„ë™íƒˆ ìº”ë“¤ìŠ¤í‹± ì°¨íŠ¸ ì‹œì‘ ===');
            
            // ëª¨ë“  ìº”ë²„ìŠ¤ ì´ˆê¸°í™”
            const canvasIds = ['dailyCanvas', 'hourly4Canvas', 'minute30Canvas', 'minute5Canvas', 'minute1Canvas'];
            
            canvasIds.forEach(canvasId => {
                const canvas = document.getElementById(canvasId);
                const ctx = canvas.getContext('2d');
                canvasContexts[canvasId] = ctx;
                
                // ìº”ë²„ìŠ¤ í¬ê¸° ì„¤ì •
                const container = canvas.parentElement;
                canvas.width = container.clientWidth - 40;
                canvas.height = container.clientHeight - 40;
                
                console.log(`âœ… ${canvasId} ì´ˆê¸°í™” ì™„ë£Œ: ${canvas.width}x${canvas.height}`);
            });
            
            // ì°¨íŠ¸ í¬ê¸° ì„¤ì •
            chartDimensions.width = canvasContexts['dailyCanvas'].canvas.width;
            chartDimensions.height = canvasContexts['dailyCanvas'].canvas.height;
            
            console.log('ğŸ“ ì°¨íŠ¸ í¬ê¸°:', chartDimensions);
            
            // ì½”ì¸ ì„ íƒê¸° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('coinSelector').addEventListener('change', function(e) {
                currentSymbol = e.target.value;
                loadFractalCandleData();
            });
            
            // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
            loadFractalCandleData();
        }
        
        // í”„ë™íƒˆ ìº”ë“¤ ë°ì´í„° ë¡œë“œ
        async function loadFractalCandleData() {
            console.log(`ğŸ”„ ${currentSymbol} í”„ë™íƒˆ ìº”ë“¤ ë°ì´í„° ë¡œë”© ì‹œì‘...`);
            
            try {
                // ë¡œë”© ë©”ì‹œì§€ í‘œì‹œ
                document.getElementById('loadingMessage').style.display = 'flex';
                
                // ê° ì‹œê°„ëŒ€ë³„ ë°ì´í„° ë³‘ë ¬ ë¡œë“œ
                const promises = [
                    fetchKlineData(currentSymbol, '1d', 5),    // ì¼ë´‰ 5ê°œ
                    fetchKlineData(currentSymbol, '4h', 30),   // 4ì‹œê°„ë´‰ 30ê°œ (5ì¼)
                    fetchKlineData(currentSymbol, '30m', 240), // 30ë¶„ë´‰ 240ê°œ (5ì¼)
                    fetchKlineData(currentSymbol, '5m', 1440), // 5ë¶„ë´‰ 1440ê°œ (5ì¼)
                    fetchKlineData(currentSymbol, '1m', 7200)  // 1ë¶„ë´‰ 7200ê°œ (5ì¼)
                ];
                
                const [dailyData, hourly4Data, minute30Data, minute5Data, minute1Data] = await Promise.all(promises);
                
                // ë°ì´í„° ì €ì¥
                candleData['1d'] = dailyData;
                candleData['4h'] = hourly4Data;
                candleData['30m'] = minute30Data;
                candleData['5m'] = minute5Data;
                candleData['1m'] = minute1Data;
                
                console.log('ğŸ“Š ìº”ë“¤ ë°ì´í„° ë¡œë”© ì™„ë£Œ:', {
                    'ì¼ë´‰': dailyData.length,
                    '4ì‹œê°„ë´‰': hourly4Data.length,
                    '30ë¶„ë´‰': minute30Data.length,
                    '5ë¶„ë´‰': minute5Data.length,
                    '1ë¶„ë´‰': minute1Data.length
                });
                
                // í”„ë™íƒˆ ìº”ë“¤ ì°¨íŠ¸ ê·¸ë¦¬ê¸°
                drawFractalCandles();
                
                // ë¡œë”© ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
                document.getElementById('loadingMessage').style.display = 'none';
                
                console.log('âœ… í”„ë™íƒˆ ìº”ë“¤ ì°¨íŠ¸ ì™„ì„±!');
                
            } catch (error) {
                console.error('âŒ í”„ë™íƒˆ ìº”ë“¤ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);
                
                document.getElementById('loadingMessage').innerHTML = `
                    <div style="text-align: center; color: #ff4757;">
                        âŒ í”„ë™íƒˆ ìº”ë“¤ ë°ì´í„° ë¡œë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤<br>
                        <small style="color: #666; font-size: 0.9rem;">ì—ëŸ¬: ${error.message}</small>
                    </div>
                `;
            }
        }
        
        // ë°”ì´ë‚¸ìŠ¤ Kline ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        async function fetchKlineData(symbol, interval, limit) {
            try {
                const response = await fetch(`https://api.binance.com/api/v3/klines?symbol=${symbol}&interval=${interval}&limit=${limit}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                console.log(`ï¿½ ${symbol} ${interval} ë°ì´í„° ìˆ˜ì‹ :`, data.length, 'ê°œ ìº”ë“¤');
                
                // Kline ë°ì´í„° íŒŒì‹± [openTime, open, high, low, close, volume, closeTime, ...]
                const parsedData = data.map(kline => ({
                    timestamp: parseInt(kline[0]),
                    open: parseFloat(kline[1]),
                    high: parseFloat(kline[2]),
                    low: parseFloat(kline[3]),
                    close: parseFloat(kline[4]),
                    volume: parseFloat(kline[5])
                }));
                
                return parsedData;
                
            } catch (error) {
                console.error(`âŒ ${symbol} ${interval} ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:`, error);
                return [];
            }
        }
        
        // í”„ë™íƒˆ ìº”ë“¤ ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        function drawFractalCandles() {
            console.log('ğŸ¨ í”„ë™íƒˆ ìº”ë“¤ ê·¸ë¦¬ê¸° ì‹œì‘...');
            
            // ëª¨ë“  ìº”ë²„ìŠ¤ í´ë¦¬ì–´
            Object.values(canvasContexts).forEach(ctx => {
                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
            });
            
            // ê°€ê²© ë²”ìœ„ ê³„ì‚° (ëª¨ë“  ì‹œê°„ëŒ€ ë°ì´í„° í¬í•¨)
            const priceRange = calculatePriceRange();
            console.log('ï¿½ ê°€ê²© ë²”ìœ„:', priceRange);
            
            // ê° ì‹œê°„ëŒ€ë³„ ìº”ë“¤ ê·¸ë¦¬ê¸°
            drawTimeframeCandles('1d', 'dailyCanvas', priceRange, 1.0, '#222222');
            drawTimeframeCandles('4h', 'hourly4Canvas', priceRange, 0.8, '#FF5733');  
            drawTimeframeCandles('30m', 'minute30Canvas', priceRange, 0.6, '#2E7D32');
            drawTimeframeCandles('5m', 'minute5Canvas', priceRange, 0.4, '#1976D2');
            drawTimeframeCandles('1m', 'minute1Canvas', priceRange, 0.2, '#9C27B0');
            
            console.log('âœ¨ í”„ë™íƒˆ ìº”ë“¤ ê·¸ë¦¬ê¸° ì™„ë£Œ!');
        }
        
        // ê°€ê²© ë²”ìœ„ ê³„ì‚°
        function calculatePriceRange() {
            let allPrices = [];
            
            Object.values(candleData).forEach(timeframeData => {
                timeframeData.forEach(candle => {
                    allPrices.push(candle.high, candle.low);
                });
            });
            
            if (allPrices.length === 0) return { min: 0, max: 100 };
            
            const min = Math.min(...allPrices);
            const max = Math.max(...allPrices);
            const padding = (max - min) * 0.1; // 10% ì—¬ìœ  ê³µê°„
            
            return {
                min: min - padding,
                max: max + padding
            };
        }
        
        // íŠ¹ì • ì‹œê°„ëŒ€ ìº”ë“¤ ê·¸ë¦¬ê¸°
        function drawTimeframeCandles(timeframe, canvasId, priceRange, opacity, color) {
            const ctx = canvasContexts[canvasId];
            const data = candleData[timeframe];
            
            if (!data || data.length === 0) return;
            
            console.log(`ğŸ•¯ï¸ ${timeframe} ìº”ë“¤ ê·¸ë¦¬ê¸°: ${data.length}ê°œ`);
            
            // ìº”ë“¤ í¬ê¸° ê³„ì‚°
            const candleWidth = getCandleWidth(timeframe);
            const spacing = candleWidth * 0.1;
            
            // ìµœê·¼ ë°ì´í„°ë§Œ í‘œì‹œ (í™”ë©´ì— ë§ê²Œ)
            const maxCandles = Math.floor(chartDimensions.width / (candleWidth + spacing));
            const recentData = data.slice(-maxCandles);
            
            recentData.forEach((candle, index) => {
                const x = index * (candleWidth + spacing);
                drawSingleCandle(ctx, x, candle, candleWidth, priceRange, opacity, color);
            });
        }
        
        // ì‹œê°„ëŒ€ë³„ ìº”ë“¤ í­ ê³„ì‚°
        function getCandleWidth(timeframe) {
            const baseWidth = chartDimensions.width / 10; // ê¸°ë³¸ í­
            
            switch(timeframe) {
                case '1d': return baseWidth;           // ê°€ì¥ í° ìº”ë“¤
                case '4h': return baseWidth / 6;       // ì¼ë´‰ì˜ 1/6
                case '30m': return baseWidth / 48;     // ì¼ë´‰ì˜ 1/48
                case '5m': return baseWidth / 288;     // ì¼ë´‰ì˜ 1/288
                case '1m': return baseWidth / 1440;    // ì¼ë´‰ì˜ 1/1440
                default: return baseWidth;
            }
        }
        
        // ë‹¨ì¼ ìº”ë“¤ ê·¸ë¦¬ê¸°
        function drawSingleCandle(ctx, x, candle, width, priceRange, opacity, color) {
            // ê°€ê²©ì„ Yì¢Œí‘œë¡œ ë³€í™˜
            const getY = (price) => {
                const ratio = (price - priceRange.min) / (priceRange.max - priceRange.min);
                return chartDimensions.height - (ratio * chartDimensions.height);
            };
            
            const openY = getY(candle.open);
            const closeY = getY(candle.close);
            const highY = getY(candle.high);
            const lowY = getY(candle.low);
            
            // ìƒìŠ¹/í•˜ë½ ìƒ‰ìƒ ê²°ì •
            const isUp = candle.close >= candle.open;
            const candleColor = isUp ? '#4CAF50' : '#F44336'; // ì´ˆë¡/ë¹¨ê°•
            
            // íˆ¬ëª…ë„ ì ìš©
            ctx.globalAlpha = opacity;
            
            // ìº”ë“¤ ëª¸í†µ ê·¸ë¦¬ê¸°
            ctx.fillStyle = candleColor;
            const bodyTop = Math.min(openY, closeY);
            const bodyHeight = Math.abs(closeY - openY);
            
            if (bodyHeight > 0) {
                ctx.fillRect(x, bodyTop, width, bodyHeight);
            } else {
                // ë„ì§€ ìº”ë“¤ (ì‹œê°€ = ì¢…ê°€)
                ctx.strokeStyle = candleColor;
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(x, openY);
                ctx.lineTo(x + width, openY);
                ctx.stroke();
            }
            
            // ìº”ë“¤ ê¼¬ë¦¬ ê·¸ë¦¬ê¸° (High-Low)
            ctx.strokeStyle = candleColor;
            ctx.lineWidth = Math.max(1, width / 10);
            ctx.beginPath();
            ctx.moveTo(x + width/2, highY);
            ctx.lineTo(x + width/2, lowY);
            ctx.stroke();
            
            // íˆ¬ëª…ë„ ë¦¬ì…‹
            ctx.globalAlpha = 1.0;
        }
        
        // ì°¨íŠ¸ ìƒˆë¡œê³ ì¹¨
        function refreshChart() {
            console.log('ğŸ”„ í”„ë™íƒˆ ìº”ë“¤ ì°¨íŠ¸ ìƒˆë¡œê³ ì¹¨ ì‹œì‘...');
            loadFractalCandleData();
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì°¨íŠ¸ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeFractalChart();
        });
    </script>
</body>
</html>