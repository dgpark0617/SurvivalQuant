<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SurvivalQuant</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            color: #333;
            margin: 0;
            padding: 10px;
        }

        /* 전체 컨테이너 */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* 1. 헤더 섹션 */
        .header-section {
            width: 100%;
            background: linear-gradient(135deg, #4e54c8 0%, #8f94fb 100%);
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 8px;
        }

        /* 2. 링크 섹션 */
        .links-section {
            width: 100%;
            display: flex;
            justify-content: center;
            padding: 10px;
            background: #ffffff;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .quick-links {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .quick-link {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            background: #fff;
            border: 1px solid #e9ecef;
            border-radius: 20px;
            text-decoration: none;
            color: #4e54c8;
            font-size: 0.9rem;
            height: 32px;
        }

        /* 3. 데이터 디스플레이 영역 */
        .data-display-section {
            width: 100%;
            display: flex;
            gap: 15px;
        }

        /* 3-1. 시계 영역 */
        .clock-section {
            flex: 0 0 auto;
            width: 200px;
            background: #ffffff;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .clock-city-name {
            font-size: 1.2rem;
            color: #4e54c8;
            font-weight: 500;
        }

        .analog-clock-wrapper {
            width: 150px;
            height: 150px;
            position: relative;
        }

        .digital-clock {
            font-size: 1.1rem;
            color: #333;
            font-family: 'Courier New', monospace;
        }

        /* 3-2. 지표 영역 */
        .indicators-section {
            flex: 1;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-content: flex-start;
            background: #ffffff;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 10px;
        }

        /* 공통 스타일 */
        .market-item-section {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 4px 8px;
            background: #ffffff;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            height: 32px;
            white-space: nowrap;
        }

        .market-label {
            font-size: 0.9rem;
            color: #555;
            min-width: 60px;
        }

        .market-value {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #333;
        }

        .market-change {
            font-size: 0.85rem;
            font-weight: bold;
            min-width: 55px;
            text-align: right;
        }

        .market-change.positive { color: #00b894; }
        .market-change.negative { color: #ff7675; }

        .market-info {
            font-size: 0.8rem;
            color: #888;
        }

        /* 4. 광고 섹션 */
        .ad-container {
            width: 100%;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            padding: 15px;
            background: #ffffff;
            border: 1px solid #e9ecef;
            border-radius: 8px;
        }

        .ad-placeholder {
            min-height: 250px;
            border: 1px dashed #e9ecef;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            text-align: center;
            color: #adb5bd;
        }

        .ad-size {
            font-size: 0.8rem;
            margin: 5px 0;
        }

        @media (max-width: 768px) {
            .data-display-section {
                flex-direction: column;
            }
            
            .clock-section {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- 1. 헤더 섹션 -->
        <div class="header-section">
            <h1>🚀 생존형 퀀트의 경제적 낙원</h1>
            <p>실시간 코인 차트 및 투자 도구</p>
        </div>

        <!-- 2. 링크 섹션 -->
        <div class="links-section">
            <div class="quick-links">
                <a href="https://economiceden.com" class="quick-link">🏠 EconomicEden</a>
                <a href="games/index.html" class="quick-link">📝 개발블로그</a>
                <a href="utilities.html" class="quick-link">🛠️ 유틸리티</a>
                <a href="games/DungeonDual4.html" class="quick-link">🎮 게임</a>
                <a href="ads/index.html" class="quick-link">📊 대시보드</a>
            </div>
        </div>

        <!-- 3. 데이터 디스플레이 영역 -->
        <div class="data-display-section">
            <!-- 3-1. 시계 영역 -->
            <div class="clock-section">
                <div class="clock-city-name">서울</div>
                <div class="analog-clock-wrapper">
                    <canvas id="analog-clock"></canvas>
                </div>
                <div class="digital-clock">
                    <span id="digital-time"></span>
                </div>
            </div>

            <!-- 3-2. 지표 영역 -->
            <div class="indicators-section">
                <!-- IP 주소 -->
                <div class="market-item-section">
                    <span class="market-label">IP</span>
                    <span class="market-value" id="ip-address">확인 중...</span>
                </div>

                <!-- 주요 지수 -->
                <div class="market-item-section">
                    <span class="market-label">S&P 500</span>
                    <span class="market-value" id="gspc_price">Loading...</span>
                    <span class="market-change" id="gspc_change">0.00%</span>
                </div>

                <div class="market-item-section">
                    <span class="market-label">나스닥</span>
                    <span class="market-value" id="ndx_price">Loading...</span>
                    <span class="market-change" id="ndx_change">0.00%</span>
                </div>

                <div class="market-item-section">
                    <span class="market-label">다우존스</span>
                    <span class="market-value" id="dji_price">Loading...</span>
                    <span class="market-change" id="dji_change">0.00%</span>
                </div>

                <div class="market-item-section">
                    <span class="market-label">코스피</span>
                    <span class="market-value" id="ks11_price">Loading...</span>
                    <span class="market-change" id="ks11_change">0.00%</span>
                </div>

                <div class="market-item-section">
                    <span class="market-label">코스닥</span>
                    <span class="market-value" id="kq11_price">Loading...</span>
                    <span class="market-change" id="kq11_change">0.00%</span>
                </div>

                <!-- 암호화폐 -->
                <div class="market-item-section">
                    <span class="market-label">비트코인</span>
                    <span class="market-value" id="btc_price">Loading...</span>
                    <span class="market-change" id="btc_change">0.00%</span>
                </div>

                <div class="market-item-section">
                    <span class="market-label">이더리움</span>
                    <span class="market-value" id="eth_price">Loading...</span>
                    <span class="market-change" id="eth_change">0.00%</span>
                </div>

                <!-- 원자재 -->
                <div class="market-item-section">
                    <span class="market-label">금</span>
                    <span class="market-value" id="gc_f_price">Loading...</span>
                    <span class="market-change" id="gc_f_change">0.00%</span>
                </div>

                <div class="market-item-section">
                    <span class="market-label">은</span>
                    <span class="market-value" id="si_f_price">Loading...</span>
                    <span class="market-change" id="si_f_change">0.00%</span>
                </div>

                <!-- 통화/금리 -->
                <div class="market-item-section">
                    <span class="market-label">USD/KRW</span>
                    <span class="market-value" id="usdkrw_price">Loading...</span>
                    <span class="market-change" id="usdkrw_change">0.00%</span>
                </div>

                <div class="market-item-section">
                    <span class="market-label">기준금리</span>
                    <span class="market-value" id="bok_rate">3.50%</span>
                    <span class="market-info">2024.01</span>
                </div>
            </div>
        </div>

        <!-- 4. 광고 섹션 -->
        <div class="ad-container">
            <div class="ad-placeholder">
                <p>프리미엄 광고</p>
                <p class="ad-size">300x600px</p>
            </div>
            <div class="ad-placeholder">
                <p>거래소 광고</p>
                <p class="ad-size">300x250px</p>
            </div>
            <div class="ad-placeholder">
                <p>코인 프로젝트</p>
                <p class="ad-size">300x250px</p>
            </div>
        </div>
    </div>

    <script>
        // IP 주소 확인
        async function getIPAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                document.getElementById('ip-address').textContent = data.ip;
            } catch (error) {
                document.getElementById('ip-address').textContent = '확인 불가';
                console.error('IP 주소 확인 실패:', error);
            }
        }

        // 시장 데이터 업데이트
        async function getMarketPrices() {
            try {
                // 암호화폐 데이터 (Binance API)
                const cryptoResponse = await fetch('https://api.binance.com/api/v3/ticker/24hr?symbols=["BTCUSDT","ETHUSDT"]');
                const cryptoData = await cryptoResponse.json();
                
                cryptoData.forEach(crypto => {
                    const symbol = crypto.symbol === 'BTCUSDT' ? 'btc' : 'eth';
                    updateMarketData(symbol, 
                        parseFloat(crypto.lastPrice), 
                        parseFloat(crypto.priceChangePercent)
                    );
                });

                // 주식 시장 데이터 (Alpha Vantage API)
                const symbols = {
                    'SPY': 'gspc',
                    'QQQ': 'ndx',
                    'DIA': 'dji',
                    'EWY': 'ks11',
                    'KORU': 'kq11'
                };

                for (const [symbol, id] of Object.entries(symbols)) {
                    try {
                        const response = await fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=demo`);
                        const data = await response.json();
                        
                        if (data['Global Quote']) {
                            const quote = data['Global Quote'];
                            updateMarketData(id,
                                parseFloat(quote['05. price']),
                                parseFloat(quote['10. change percent'])
                            );
                        }
                    } catch (error) {
                        console.error(`${symbol} 데이터 조회 실패:`, error);
                    }
                }

                // 원자재 데이터
                const commodities = ['GC=F', 'SI=F'];
                for (const symbol of commodities) {
                    try {
                        const response = await fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=demo`);
                        const data = await response.json();
                        
                        if (data['Global Quote']) {
                            const quote = data['Global Quote'];
                            const id = symbol === 'GC=F' ? 'gc_f' : 'si_f';
                            updateMarketData(id,
                                parseFloat(quote['05. price']),
                                parseFloat(quote['10. change percent'])
                            );
                        }
                    } catch (error) {
                        console.error(`${symbol} 데이터 조회 실패:`, error);
                    }
                }

            } catch (error) {
                console.error('시장 데이터 조회 실패:', error);
            }
        }

        // 시장 데이터 UI 업데이트
        function updateMarketData(symbol, price, change) {
            const priceElement = document.getElementById(`${symbol}_price`);
            const changeElement = document.getElementById(`${symbol}_change`);
            
            if (priceElement) {
                priceElement.textContent = price.toLocaleString(undefined, {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                });
            }
            
            if (changeElement) {
                changeElement.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
                changeElement.className = `market-change ${change >= 0 ? 'positive' : 'negative'}`;
            }
        }

        // 아날로그 시계 관련 코드
        const canvas = document.getElementById('analog-clock');
        const ctx = canvas.getContext('2d');
        
        function resizeClock() {
            const wrapper = canvas.parentElement;
            const size = Math.min(wrapper.clientWidth, wrapper.clientHeight);
            canvas.width = size;
            canvas.height = size;
            ctx.translate(size/2, size/2);
        }

        function drawClock() {
            // 서울 시간 계산
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            const seoulTime = new Date(utc + (9 * 3600000));

            // 디지털 시계 업데이트
            document.getElementById('digital-time').textContent = 
                seoulTime.toLocaleTimeString('ko-KR', { 
                    hour12: false, 
                    hour: '2-digit', 
                    minute: '2-digit', 
                    second: '2-digit' 
                });

            // 아날로그 시계 그리기
            const radius = canvas.width/2 * 0.90;
            ctx.save();
            ctx.clearRect(-canvas.width/2, -canvas.height/2, canvas.width, canvas.height);
            
            drawClockFace(radius);
            drawClockHands(radius, seoulTime);
            
            ctx.restore();
            requestAnimationFrame(drawClock);
        }

        function drawClockFace(radius) {
            // 시계 배경
            ctx.beginPath();
            ctx.arc(0, 0, radius, 0, 2 * Math.PI);
            ctx.fillStyle = '#f8f9fa';
            ctx.fill();

            // 테두리
            ctx.lineWidth = radius * 0.05;
            ctx.strokeStyle = '#e9ecef';
            ctx.stroke();

            // 숫자
            ctx.font = radius * 0.15 + "px Segoe UI";
            ctx.textBaseline = "middle";
            ctx.textAlign = "center";
            ctx.fillStyle = "#333";
            
            for (let num = 1; num <= 12; num++) {
                const angle = (num * Math.PI / 6) - (Math.PI / 2);
                const x = radius * 0.85 * Math.cos(angle);
                const y = radius * 0.85 * Math.sin(angle);
                ctx.fillText(num.toString(), x, y);
            }

            // 중심점
            ctx.beginPath();
            ctx.arc(0, 0, radius * 0.03, 0, 2 * Math.PI);
            ctx.fillStyle = '#4e54c8';
            ctx.fill();
        }

        function drawClockHands(radius, time) {
            const hour = time.getHours() % 12;
            const minute = time.getMinutes();
            const second = time.getSeconds();
            const millisecond = time.getMilliseconds();

            // 시침
            const hourAngle = (hour * Math.PI / 6) +
                (minute * Math.PI / (6 * 60)) +
                (second * Math.PI / (360 * 60));
            drawHand(hourAngle, radius * 0.5, radius * 0.07, '#333');

            // 분침
            const minuteAngle = (minute * Math.PI / 30) + 
                (second * Math.PI / (30 * 60));
            drawHand(minuteAngle, radius * 0.8, radius * 0.05, '#555');

            // 초침
            const secondAngle = (second * Math.PI / 30) + 
                (millisecond * Math.PI / (30 * 1000));
            drawHand(secondAngle, radius * 0.9, radius * 0.02, '#4e54c8');
        }

        function drawHand(angle, length, width, color) {
            ctx.beginPath();
            ctx.lineWidth = width;
            ctx.lineCap = "round";
            ctx.strokeStyle = color;
            ctx.moveTo(0, 0);
            ctx.rotate(angle);
            ctx.lineTo(0, -length);
            ctx.stroke();
            ctx.rotate(-angle);
        }

        // 초기화
        window.addEventListener('load', function() {
            resizeClock();
            drawClock();
            getIPAddress();
            getMarketPrices();
            
            // 1분마다 시장 데이터 업데이트
            setInterval(getMarketPrices, 60000);
        });

        // 반응형 처리
        window.addEventListener('resize', resizeClock);
    </script>
</body>
</html>